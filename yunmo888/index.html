<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parallax Test v1.3</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #333; 
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .stage {
            position: relative;
            overflow: hidden; /* Top 的轮廓作为蒙版，超出隐藏 */
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            /* 自动读取 background.png */
            background: url('./background.png') center/cover no-repeat;
        }

        .layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            will-change: transform;
            pointer-events: none; 
        }

        /* 静态顶层框 */
        .layer-top-static {
            position: relative;
            display: block;
            z-index: 10;
            max-height: 90vh; 
            width: auto;
        }

        /* 这里的 scale 稍微给大一点，配合高灵敏度移动，防止露白 */
        .layer-1 { z-index: 3; } 
        .layer-2 { z-index: 2; } 
        .layer-3 { z-index: 1; } 

    </style>
</head>
<body>

    <div class="stage">
        <img src="./top.png" class="layer-top-static" alt="Frame">

        <img src="./1.png" class="layer layer-1" data-speed="0.03" alt="Layer 1">
        <img src="./2.png" class="layer layer-2" data-speed="0.045" alt="Layer 2">
        <img src="./3.png" class="layer layer-3" data-speed="0.06" alt="Layer 3">
    </div>

    <script>
        const layers = document.querySelectorAll('.layer');
        
        // --- 全局控制台 ---
        // 修改这个数字来控制晃动幅度
        // 1.0 = 默认
        // 2.0 = 增强 100%
        // 0.5 = 减弱
        const sensitivity = 20.0; 
        // ----------------

        document.addEventListener('mousemove', (e) => {
            // 计算鼠标偏移 (-1 到 1)
            // 加了负号让移动方向反转，产生更有深度的视差感
            const x = -(e.clientX - window.innerWidth / 2) / (window.innerWidth / 2);
            const y = -(e.clientY - window.innerHeight / 2) / (window.innerHeight / 2);

            layers.forEach(layer => {
                const speed = parseFloat(layer.getAttribute('data-speed'));
                
                // 计算位移量：基础速度 * 100 * 全局灵敏度
                const xPos = x * speed * 100 * sensitivity; 
                const yPos = y * speed * 100 * sensitivity; 
                
                // scale(1.15) 是为了防止移动幅度过大露出背景，如果穿帮了就改大这个数字
                layer.style.transform = `translate(-50%, -50%) translate(${xPos}px, ${yPos}px) scale(1.15)`;
            });
        });
    </script>
</body>
</html>